<!-- hidden checkout page to popup with facebox -->

<div id="checkout" >
	<iframe src="orders/new" allowtransparency="true" height="495" width="100%" style="transition: height 210ms cubic-bezier(0.39, 0.575, 0.565, 1); -webkit-transition: height 210ms cubic-bezier(0.39, 0.575, 0.565, 1); border: 0px; z-index: 9999;"  frameborder="0"></iframe>
</div>

<script>
	jQuery(document).ready(function($) {
   	$('a[rel*=facebox]').facebox()
  })
</script>

<h1>Cart</h1>
<p>cart id: <%= @cart.id %></p>
<% cart_items = @cart.cart_items %>
<table class="table">
	<thead>
		<tr>
			<th> ID </th>
			<th> Name </th>
			<th> CartId </th>
			<th> MenuItemId </th>
			<th> Name </th>
			<th> Qty </th>
			<th> Price </th>
		</tr>
	</thead>
	<tbody>
		<% cart_items.each do |item| %>
			<tr>
				<td><%= item.id %></td>
				<td><%= item.name %></td>
				<td><%= item.cart_id %></td>
				<% menu_item = MenuItem.find(item.menu_item_id) %>
				<td><%= item.menu_item_id %></td>
				<td><%= menu_item.name %></td>
				<td>
					<%= link_to icon('minus-square' , class: "fa-lg add_subtract_buttons"), decrease_qty_path(:cart_item_id => item.id), :method => :post  , class: "no-hover hvr-grow"  %> 
					<%= item.qty %> 
					<%= link_to icon('plus-square' , class: "fa-lg add_subtract_buttons"), increase_qty_path(:cart_item_id => item.id), :method => :post , class: "no-hover hvr-grow" %>
				</td>
				<td><%= number_to_currency(menu_item.price, unit: '$') %></td>
			</tr>
		<% end %>
	</tbody>
</table>

<p> sub total: <%= number_to_currency(@cart.subtotal, unit: '$') %> </p>
<p> tax: <%= number_to_currency(@cart.tax, unit: '$') %> </p>
<p> total: <%= number_to_currency(@cart.total, unit: '$') %> </p>

<% if current_cart.cart_items != nil && current_cart.cart_items.length > 0 %>
  <%= link_to "Checkout", '#checkout' , rel:"facebox"  %>
<% end %>


